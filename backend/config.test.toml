# Integr8sCode backend test configuration
# Differences from config.toml: lower timeouts, faster bcrypt, relaxed rate limits
# Secrets (SECRET_KEY, MONGODB_URL) live in secrets.toml â€” use secrets.test.toml in CI.

TESTING = true
PROJECT_NAME = "integr8scode"
DATABASE_NAME = "integr8scode_db"
ALGORITHM = "HS256"
ACCESS_TOKEN_EXPIRE_MINUTES = 1440

KUBERNETES_CONFIG_PATH = "/app/kubeconfig.yaml"
KUBERNETES_CA_CERTIFICATE_PATH = "/app/certs/k8s-ca.pem"
K8S_POD_CPU_LIMIT = "1000m"
K8S_POD_MEMORY_LIMIT = "128Mi"
K8S_POD_CPU_REQUEST = "200m"
K8S_POD_MEMORY_REQUEST = "128Mi"
K8S_POD_EXECUTION_TIMEOUT = 5
K8S_NAMESPACE = "integr8scode"

RATE_LIMITS = "99999/second"
RATE_LIMIT_ENABLED = false

SERVER_HOST = "0.0.0.0"

# Kafka (lower timeouts for tests)
KAFKA_BOOTSTRAP_SERVERS = "kafka:29092"
SCHEMA_REGISTRY_URL = "http://schema-registry:8081"
ENABLE_EVENT_STREAMING = true
EVENT_RETENTION_DAYS = 30
KAFKA_CONSUMER_GROUP_ID = "integr8scode-backend"
KAFKA_AUTO_OFFSET_RESET = "earliest"
KAFKA_ENABLE_AUTO_COMMIT = true
KAFKA_SESSION_TIMEOUT_MS = 10000
KAFKA_HEARTBEAT_INTERVAL_MS = 3000
KAFKA_REQUEST_TIMEOUT_MS = 15000
KAFKA_MAX_POLL_RECORDS = 500

# SSE
SSE_CONSUMER_POOL_SIZE = 10
SSE_HEARTBEAT_INTERVAL = 30

LOG_LEVEL = "WARNING"

# Tracing
ENABLE_TRACING = true
JAEGER_AGENT_HOST = "jaeger"
JAEGER_AGENT_PORT = 6831
TRACING_SERVICE_NAME = "integr8scode-backend"
TRACING_SERVICE_VERSION = "1.0.0"
TRACING_SAMPLING_RATE = 1.0

# DLQ
DLQ_RETRY_MAX_ATTEMPTS = 5
DLQ_RETRY_BASE_DELAY_SECONDS = 60.0
DLQ_RETRY_MAX_DELAY_SECONDS = 3600.0
DLQ_RETENTION_DAYS = 7
DLQ_WARNING_THRESHOLD = 100
DLQ_CRITICAL_THRESHOLD = 1000

APP_URL = "https://localhost"

SERVICE_NAME = "integr8scode-backend"
SERVICE_VERSION = "1.0.0"

# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT = "http://otel-collector:4317"
OTEL_SERVICE_NAME = "integr8scode-backend"
OTEL_SERVICE_VERSION = "1.0.0"
OTEL_RESOURCE_ATTRIBUTES = "environment=test,team=backend"

# Gunicorn / Uvicorn
WEB_CONCURRENCY = 1
WEB_THREADS = 4
WEB_TIMEOUT = 60
WEB_BACKLOG = 2048

BCRYPT_ROUNDS = 4
REDIS_MAX_CONNECTIONS = 200
